import{r as d,o as u,c as p,a as e,b as a,w as c,d as f,F as g,e as v,f as w,n as _,t as y,g as E,h as P,i as L,j as C}from"./vendor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const k=(s,t)=>{const o=s.__vccOpts||s;for(const[h,n]of t)o[h]=n;return o},T={data(){return{directoryList:{},view:!1,searchInput:"",isOptedIn:!1,currentPage:1,pagesTotal:1}},mounted(){let s=this;window.addEventListener("message",this.onMessage),window.addEventListener("keyup",function(t){t.key=="Escape"&&s.fireEvent("closeAll")})},destroyed(){window.removeEventListener("message"),window.removeEventListener("keyup")},methods:{onMessage(s){s.data.type==="view"&&(this.directoryList=s.data.directoryList,this.view=!0,this.isOptedIn=s.data.isOptedIn,console.log(s.data.isOptedIn)),s.data.type==="updateList"&&(this.directoryList=s.data.directoryList,this.currentPage=s.data.currentPage,this.pagesTotal=s.data.pagesTotal),s.data.type==="updateOpted"&&(this.isOptedIn=s.data.isOptedIn),s.data.type==="close"&&(this.view=!1,this.directoryList={},this.searchInput="")},fireEvent(s,t={}){fetch(`https://${GetParentResourceName()}/`+s,{method:"POST",body:JSON.stringify(t)})},searchUp(){this.searchInput.length>=2&&this.fireEvent("searchDir",{input:this.searchInput,requestedPage:1}),this.searchInput.length==0&&this.fireEvent("clear")},nextPage(){this.searchInput.length>=2?this.fireEvent("searchDir",{input:this.searchInput,requestedPage:this.currentPage+1}):this.fireEvent("searchDir",{input:"",requestedPage:this.currentPage+1})},previousPage(){this.searchInput.length>=2?this.fireEvent("searchDir",{input:this.searchInput,requestedPage:this.currentPage-1}):this.fireEvent("searchDir",{input:"",requestedPage:this.currentPage-1})},copyToClipboard(s){let t=document.querySelector("#copiable-text");t.value=s,t.select();try{document.execCommand("copy",!1)&&this.fireEvent("copied",{})}catch(o){console.error("error caught:",o)}}}},B=e("header",null,null,-1),N=e("div",{style:{position:"absolute",left:"-9000px",top:"-9000px"}},[e("input",{id:"copiable-text"})],-1),V={key:0,class:"wrapper ma-5"},D={class:"main-container"},A=e("div",{class:"closeButtonImg-container"},[e("img",{id:"closeButtonImg"})],-1),F={class:"view-directory"},q=e("div",{class:"directory-spacer"},null,-1),S={class:"directoryList"},U=e("thead",null,[e("tr",null,[e("th",{class:"text-left",width:"40%"}," NAME "),e("th",{class:"text-left",width:"60%"}," TELEGRAM NUMBER ")])],-1),M={class:"telegram-number pl-0"},R={id:"footer-container",class:"w-auto"},j={class:"col-searchBoxTextField ml-2 mt-3"},G={class:"button-page d-flex"},z={class:"button-page d-flex"},J={class:"opted-container d-flex align-center"},K={key:0,class:"d-flex align-center mb-3 mr-2"},X=e("span",{class:"mr-2"},"Opted In",-1),H={key:1,class:"d-flex align-center mb-3 mr-2"},Q=e("span",{class:"mr-2"},"Opted Out",-1);function W(s,t,o,h,n,r){const l=d("v-btn"),b=d("v-table"),x=d("v-col"),m=d("v-row"),I=d("v-text-field"),O=d("v-container");return u(),p(g,null,[B,e("main",null,[N,n.view?(u(),p("div",V,[e("div",D,[e("div",{class:"close-button float-right ma-0 pa-0",onClick:t[0]||(t[0]=i=>r.fireEvent("closeView"))},[A,a(l,{class:"close-button-text",variant:"text"},{default:c(()=>[v("CLOSE")]),_:1})]),e("div",F,[q,a(O,{id:"directory-container",class:"w-auto ml-2 mr-2"},{default:c(()=>[a(m,null,{default:c(()=>[a(x,{cols:"12"},{default:c(()=>[e("div",S,[a(b,{height:"550px"},{default:c(()=>[U,e("tbody",null,[(u(!0),p(g,null,w(n.directoryList,i=>(u(),p("tr",{key:i.full_char_name+i.telegram},[e("td",null,y(i.full_char_name),1),e("td",M,[a(l,{onClick:ee=>r.copyToClipboard(i.telegram),class:"button-telegram-number",variant:"text"},{default:c(()=>[v(y(i.telegram),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1})])]),_:1})]),_:1}),e("div",R,[a(m,{class:"d-flex justify-space-between"},{default:c(()=>[e("div",j,[a(I,{id:"searchBoxTextField","single-line":"",modelValue:n.searchInput,"onUpdate:modelValue":t[1]||(t[1]=i=>n.searchInput=i),onInput:r.searchUp,class:"search-box text-field",label:"search"},null,8,["modelValue","onInput"])]),e("div",{id:"previous-button-container",class:_([{invisible:!(this.currentPage>1)},"button-page-container d-flex align-center align-self-center mb-2"])},[e("div",G,[e("div",{onClick:t[2]||(t[2]=i=>r.previousPage()),class:"button-page-text align-center align-self-center ma-auto pb-1"}," PREVIOUS ")])],2),e("div",{id:"next-button-container",class:_([{invisible:!(this.currentPage<this.pagesTotal)},"button-page-container d-flex align-center align-self-center mb-2"])},[e("div",z,[e("div",{onClick:t[3]||(t[3]=i=>r.nextPage()),class:"button-page-text align-center align-self-center ma-auto pb-1"}," NEXT ")])],2),e("div",J,[this.isOptedIn==!0?(u(),p("div",K,[X,e("img",{class:"optedInButtonImg",onClick:t[4]||(t[4]=i=>{r.fireEvent("setOpted",{opted:!1}),this.isOptedIn=!1,r.searchUp()})})])):f("",!0),this.isOptedIn==!1?(u(),p("div",H,[Q,e("img",{class:"optedOutButtonImg",onClick:t[5]||(t[5]=i=>{r.fireEvent("setOpted",{opted:!0}),this.isOptedIn=!0,r.searchUp()})})])):f("",!0)])]),_:1})])]),_:1})])])])):f("",!0)])],64)}const Y=k(T,[["render",W]]);const Z={dark:!1,colors:{background:"transparent",surface:"transparent",primary:"transparent","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}},$=E({components:L,directives:C,theme:{defaultTheme:"myCustomDarkTheme",themes:{myCustomDarkTheme:Z}}});P(Y).use($).mount("#app");
